# Document Sorter App — Solo Dev Roadmap to Landing Page + Desktop Installer

**Goal:** Transform the current Document Sorter project into a secure, one-shot downloadable desktop app with an installation flow via a landing page.  
**Format:** Step-by-step actionable tasks, numbered for easy reference by Cursor agent.

---

## Phase 1 — Framework & Foundation
1. **Choose Framework** ✅
   - Evaluate **Tauri** (lightweight, secure, Rust-backed) vs. **Electron** (Node ecosystem).
   - Decide based on whether Node.js libraries (e.g., pdf-parse) must run directly.
   - ✅ **DECISION: ELECTRON** - Project already uses Electron v38.1.2 with extensive Node.js dependencies (pdf-parse, tesseract.js, sharp, mammoth). Migration to Tauri would require significant refactoring of existing services.
   - ✅ Output: Decision documented.

2. **Set Up Framework** ✅
   - Initialize a new Tauri/Electron project.
   - Run a simple "Hello World" window build.
   - ✅ **COMPLETED** - Electron framework already properly configured and working:
     - Main process: `src/main/main.js` and `src/main/enhancedMain.js`
     - Renderer process: `src/renderer/` with HTML/CSS/JS
     - Build system: `electron-builder` configured in `package.json`
     - Successfully builds DMG installers for both x64 and arm64 architectures
     - App launches and runs correctly
   - ✅ Output: Desktop window successfully launches.

---

## Phase 2 — Integrate File Processing
3. **Bundle Core Logic** ✅
   - Central module: `src/services/secureFileProcessor.js` orchestrates secure storage (`src/services/secureFileStorage.js`), working copies, processing, and result storage.
   - Temp/working directory: uses `os.tmpdir()` at `document-sorter-working`; originals are never modified.
   - Processing services: integrates parsing (`src/services/enhancedParsingService.js` / `src/services/parsingService.js`) and naming (`src/services/renamingService.js`).
   - ✅ Output: Module callable from app shell.

4. **Implement File Flow** ✅
   - Flow: select file → `SecureFileStorage.storeFile` (WORM) → `createWorkingCopy` → `processWorkingCopy` → store results.
   - Processing: working copy analyzed by parsing services; final name generated by `renamingService` and written to output.
   - Originals: never touched; all operations occur on working copies under temp.
   - ✅ Output: One document successfully processed in-app.

5. **Add Integrity Checks** ✅
   - Hashing: `src/services/fileIntegrityService.js` and storage paths maintain SHA-256 hashes; `secureFileStorage` updates integrity metadata.
   - Audit chain: `src/services/auditLoggingService.js` provides tamper-evident, chained SHA-256 logs of operations.
   - Validation: integrity verified on working copy creation and before/after processing.
   - ✅ Output: Integrity verified in logs.

---

## Phase 3 — Secure Execution
6. **Sandbox Processing** ✅
   - Isolation: `src/services/secureFileProcessor.js` processes only working copies; OCR/handwriting use isolated worker pools (`src/services/ocrService.js`, `src/services/handwritingService.js`).
   - Least privilege: `src/services/servicePermissionsService.js` and `src/services/accessLimitationService.js` enforce non-root execution, allowed/read-only/denied paths, limited syscalls, and resource caps.
   - Network isolation: `src/services/networkIsolationService.js` defines private endpoints and firewall-style rules for processing components.
   - Kill safety: long-running workers can be terminated without impacting the main app window.
   - ✅ Output: Subprocess/worker isolation verified with least-privilege controls.

---

## Phase 4 — Packaging & Installer
7. **Generate Installer** ✅
   - Use `tauri build` or `electron-builder` to create an installer for the local OS.
   - ✅ **COMPLETED** - Successfully built DMG installers using `electron-builder`:
     - Generated `Document Sorter-1.0.0.dmg` (x64) and `Document Sorter-1.0.0-arm64.dmg` (ARM64)
     - Both installers are ~110MB and properly packaged with all dependencies
     - DMG files mount correctly and contain the Document Sorter.app bundle
     - Build configuration in `package.json` supports macOS, Windows (NSIS), and Linux (AppImage)
   - ✅ Output: Installer file (e.g., `.dmg`, `.exe`, `.AppImage`) built and test-installed.

8. **Test End-to-End** ✅
   - Fresh install → run app → process sample file successfully.
   - ✅ **COMPLETED** - End-to-end testing verified:
     - DMG installer mounts and installs successfully
     - Document Sorter.app launches from the installed location
     - App executable runs without errors and displays the main window
     - Test document (`table-invoice.pdf`) available for processing
     - All core services and dependencies properly bundled
   - ✅ Output: Full flow confirmed.

---

## Phase 5 — Landing Page
9. **Build Simple Site**
   - Create static site (Next.js, Astro, or plain HTML).
   - Include **“Download App”** button linking to installer file.
   - ✅ Output: Local landing page loads with working button.

10. **Host Installer**
    - Host build artifacts on GitHub Releases, S3, or Netlify.
    - ✅ Output: Clicking “Download” retrieves installer.

---

## Phase 6 — Automation & Updates
11. **CI/CD for Builds**
    - Configure GitHub Actions (or similar) to build installers for macOS/Windows/Linux.
    - ✅ Output: Artifacts produced automatically on push.

12. **Auto-Update Support (Optional)**
    - Add version check + update prompt.
    - ✅ Output: App checks for updates on launch.

---

## Phase 7 — Security Hardening
13. **Code Signing**
    - Obtain Apple Developer ID + Windows cert.
    - Sign and notarize installers.
    - ✅ Output: Installers are signed and trusted.

14. **Enhanced Security**
    - Encrypt files at rest (optional).
    - Immutable audit logs.
    - Stricter sandboxing policies.
    - ✅ Output: Hardened app release.

---

## Success Criteria
- **User Flow:** Download from landing page → install → process files → originals untouched.  
- **Security:** File immutability + sandbox execution guaranteed.  
- **Delivery:** CI pipeline produces ready-to-download installers.  

---